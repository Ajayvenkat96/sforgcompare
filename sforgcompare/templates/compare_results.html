{% extends 'base.html' %}

{% block scripts %}
<script>
$(document).ready(function () 
{
	$('tr.component').hide();

	$('tr.type td').click(function() 
	{
		var componentType = $(this).parent().attr('class').split('_')[1];
		$('.component_' + componentType).toggle();	
	});

	$('tr.component td').click(function() 
	{
		var componentName = $(this).attr('id').split('.');	
		$('#codeModalLabel').text(componentName[0] + ' - ' + componentName[1]);
		var metadata = $(this).find('textarea').val()
												.replace(/</g, '&lt;')
												.replace(/>/g,'&gt;')
												.replace(/\n/g, '<br/>');
		$('#codeModalBody').html(metadata);
		$('#viewCodeModal').modal();
	});
});
</script>
{% endblock %}

{% block content %}

	<h1>Salesforce Org Compare</h1>
	<p>
		Your Org compare results are represented below.
	</p>

	<hr />

	<select class="form-control" style="width:300px;">
		<option value="all">Show All Components</option>
		<option value="diff" selected="selected">Show Only Differences</option>
	</select>

	<br/>

	{% autoescape off %}
		{{ job.compare_result_html }}
	{% endautoescape %}

	<div class="modal fade" id="viewCodeModal" tabindex="-1" role="dialog" aria-labelledby="codeModalLabel" aria-hidden="true">
		<div class="modal-dialog">
	    	<div class="modal-content">
	      		<div class="modal-header">
	        		<button type="button" class="close" data-dismiss="modal">
	        			<span aria-hidden="true">&times;</span>
	        			<span class="sr-only">Close</span>
	        		</button>
	        		<h3 class="modal-title" id="codeModalLabel">
	        			
	        		</h3>
	      		</div>
	      		<div class="modal-body">
	        		<pre id="codeModalBody"></pre>
	      		</div>
	      		<div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			    </div>
	    	</div>
	  	</div>
	</div>

{% endblock %}