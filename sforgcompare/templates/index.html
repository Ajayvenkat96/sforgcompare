{% extends 'base.html' %}

{% block scripts %}
	<script>
		$(document).ready(function ()
		{
			$('#orgOneButton').click(function()
			{
				var loginUrl = 'https://';
				if ( $('#org_one_env').val() == 'Production' )
				{
					loginUrl += 'login'
				}
				else
				{
					loginUrl += 'test'
				}
				loginUrl += '.salesforce.com/services/oauth2/authorize?response_type=code&client_id={{client_id}}&redirect_uri={{redirect_uri}}&scope=api&state=' + $('#org_one_env').val() + 'org1';
				popupwindow(loginUrl);
			});

			$('#orgTwoButton').click(function()
			{
				var loginUrl = 'https://';
				if ( $('#org_two_env').val() == 'Production' )
				{
					loginUrl += 'login'
				}
				else
				{
					loginUrl += 'test'
				}
				loginUrl += '.salesforce.com/services/oauth2/authorize?response_type=code&client_id={{client_id}}&redirect_uri={{redirect_uri}}&scope=api&state=' + $('#org_one_env').val() + 'org2';
				popupwindow(loginUrl);
			});

		});

		function popupwindow(url) 
		{
			var w = 800;
			var h = 500;
		  	var left = (screen.width/2)-(w/2);
		  	var top = (screen.height/2)-(h/2);
		  	return window.open(url, 'SalesforceLogin', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
		} 

		function updateOrgDetails(org, username, org_name)
		{
			console.log(org);
			console.log(username);
			console.log(org_name);
		}

	</script>

{% endblock %}

{% block content %}

	<div class="inner">

		<h1>Salesforce Org Compare</h1>
		<p>
			This tool uses the Salesforce Tooling API to compare all the metadata between two Orgs. This is useful when planning deployments or building deployment packages, as well as seeing what configuration exists in Production to Sandbox or between Sandbox environments.
		</p>
		<p>
			None of your organisation information or data is captured or kept from running this tool.
		</p>

		<div class="left-half">

			<h2>Org One</h2>

			<table>

				<tr>
					<td width="125">
						<select id="org_one_env" name="org_one_env" class="form-control">
							<option value="Production">Production</option>
							<option value="Sandbox">Sandbox</option>
						</select>
					</td>
					<td>
						&nbsp;&nbsp;
						<button type="button" id="orgOneButton">
  							Login
						</button>
					</td>
				</tr>

			</table>

		</div>

		<div class="right-half">

			<h2>Org Two</h2>

			<table>

				<tr>
					<td width="125">
						<select id="org_two_env" name="org_two_env" class="form-control">
							<option value="Production">Production</option>
							<option value="Sandbox">Sandbox</option>
						</select>
					</td>
					<td>
						&nbsp;&nbsp;
						<button type="button" id="orgTwoButton">
  							Login
						</button>
					</td>
				</tr>

			</table>

		</div>

	</div>

{% endblock %}